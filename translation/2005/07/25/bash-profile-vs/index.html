<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="zh-cmn-Hans" > <![endif]-->
<html class="no-js" lang="zh-cmn-Hans" >

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>.bash_profile vs .bashrc | r.4ntix Blue's Noise Player</title>

  <link rel="stylesheet" href="http://antix.blue/theme/css/normalize.css">
  <link rel="stylesheet" href="http://antix.blue/theme/css/foundation.min.css">
  <link rel="stylesheet" href="http://antix.blue/theme/css/typo.css">
  <link rel="stylesheet" href="http://antix.blue/theme/css/pygments.css">
  <link rel="stylesheet" href="http://antix.blue/theme/css/app.css">

  <script src="http://antix.blue/theme/js/vendor/modernizr.js"></script>
</head>

<body>
  <!-- start of header -->
  <header class="contain-to-grid">
    <nav class="top-bar" data-topbar>
      <ul class="title-area">
        <li class="name">
          <h1><a href="http://antix.blue">r.4ntix Blue's Noise Player</a></h1>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
      </ul>
      <section class="top-bar-section">
        <!-- Right Nav Section -->
        <ul class="right">
          <li><a href="http://antix.blue/about/">About</a></li>
          <li>
            <a href="#">|</a>
          </li>
          <li><a href="https://www.readability.com/r4ntix/">Readability</a></li>
          <li><a href="http://instagram.com/r4ntix">Instagram</a></li>
          <li><a href="https://twitter.com/r4ntix">Twitter</a></li>
          <li><a href="https://plus.google.com/112109872395334308066">Google+</a></li>
        </ul>
      </section>
    </nav>
  </header>
  <!-- end of header -->

  <!-- start of content -->
  <div id="content" class="row">
    <div class="medium-9 large-10 columns">
      <div class="article typo textwrap">
        <h1 class="serif">.bash_profile vs .bashrc</h1>
        <!--  -->
<blockquote>
原文：<a class="reference external" href="http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html">http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html</a></blockquote>
<p>每当我工作在Linux、Unix 以及Mac OS X 下，想要为我的shell 设置PATH 和其他环境变量的时候，我总是忘记我究竟该编辑哪个bash 配置文件。应该编辑 <tt class="docutils literal">.bash_profile</tt> 还是 <tt class="docutils literal">.bashrc</tt> 呢？</p>
<p>实际上，你可以把你的bash 配置写到这两个配置文件中的任意一个，它们不存在的话则创建它。但是，为什么会存在两个不同的配置文件呢？他们的区别是什么呢？</p>
<p>根据bash 的 <a class="reference external" href="http://linux.die.net/man/1/bash">man page</a> 说明，<tt class="docutils literal">.bash_profile</tt> 是在使用 <strong>登录式shell</strong> 的时候执行的，而 <tt class="docutils literal">.bashrc</tt> 则是在使用 <strong>交互式非登录shell</strong> 时执行。</p>
<div class="section" id="shell-shell">
<h2>什么是 <strong>登录式shell</strong> 和 <strong>交互式非登录shell</strong> ？</h2>
<p>每当你直接坐在电脑前或者是远程使用ssh 通过console 使用账号和密码进行登录时：<tt class="docutils literal">.bash_profile</tt> 将在初始化命令提示符之前执行，完成shell 的配置。</p>
<p>但是，如果你已经登录你的电脑，在图形界面Gnome 或者KDE 下打开一个终端窗口(xterm)，这时 <tt class="docutils literal">.bashrc</tt> 将在这个窗口命令提示符初始化之前执行，以完成shell 的配置。同时，当你在一个终端里执行 <code class="bash">/bin/bash</code> 时，<tt class="docutils literal">.bashrc</tt> 也将被执行。</p>
</div>
<div class="section" id="id1">
<h2>为什么会存在两个不同的配置文件？</h2>
<p>有时候，你想在你每次登录机器时，打印出机器的一些诊断信息(平均负载、内存使用率、当前用户等)，你可以通过配置 <tt class="docutils literal">.bash_profile</tt> 来完成。但是，如果你使用 <tt class="docutils literal">.bashrc</tt> 来配置的话，则会在每次打开终端窗口时都打印出这些信息来，而不仅仅只是在登录的时候。</p>
</div>
<div class="section" id="mac-os-x">
<h2>Mac OS X —— 一个列外</h2>
<p>Mac OS X 的Terminal.app 终端程序是个例外。它对每个新建的终端窗口，都默认以 <strong>登录式shell</strong> 方式打开，然后执行 <tt class="docutils literal">.bash_profile</tt> 而不是 <tt class="docutils literal">.bashrc</tt> 。虽然其他的GUI 终端模拟器也可以这样，但基本都不这么干。</p>
</div>
<div class="section" id="id2">
<h2>建议</h2>
<p>大多数情况下没有人愿意同时维护两个不同的配置文件，来分别应对 <strong>登录式shell</strong> 和 <strong>交互式非登录shell</strong> ——这样的话，当你想设置PATH 时，你得同时在两个文件里都配置。其实，你可以通过在 <tt class="docutils literal">.bash_profile</tt> 里引用 <tt class="docutils literal">.bashrc</tt>，然后在 <tt class="docutils literal">.bashrc</tt> 里进行PATH 和其他配置。</p>
<p>将下面几行代码添加到你的 <tt class="docutils literal">.bash_profile</tt> 文件里：</p>
<div class="highlight"><pre><span class="k">if</span> <span class="o">[</span> -f ~/.bashrc <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">source</span> ~/.bashrc
<span class="k">fi</span>
</pre></div>
<p>现在当你通过console 进行 <strong>登录式shell</strong> 时，<tt class="docutils literal">.bashrc</tt> 也将被执行了。</p>
</div>

      </div>
    </div>
    <div class="hide-for-small-only medium-3 large-2 columns">
      <ul class="side-nav">
        <li><time datetime="2005-07-25T00:00:00+08:00" class="serif">2005年07月25日</time></li>
        <li class="divider"></li>
        <li><span class="serif">Written by</span> <a href="#">Josh Staiger</a></li>
        <li class="divider"></li>
        <li><span class="serif">Categories</span> <a href="#">Translation</a></li>
        <li class="divider"></li>
        <li><span class="serif">Tags</span> <a href="#">linux</a> <a href="#">unix</a> <a href="#">mac</a> <a href="#">bash</a> <a href="#">shell</a> </li>
      </ul>
    </div>
  </div>
  <!-- end of content -->

  <!-- start of footer -->
  <footer class="row">
    <div class="small-6 medium-6 large-6 columns">
      <small>
        Designed and Created(2005-2015) by <a href="http://antix.blue/about/">r.4ntix Shawn</a>
        <br />
        ✎ Time waits for no one.
      </small>
    </div>
    <div class="small-6 medium-6 large-6 columns">
      <small class="right">
        Help from <a href="http://blog.getpelican.com/">Pelican</a> and <a href="http://foundation.zurb.com/">Foundation 5</a> and <a href="http://typo.sofish.de/">Typo.css</a>
        <br />
        ☂ Hosting on <a href="https://github.com/">GitHub</a> and <a href="https://gitcafe.com/">GitCafe</a>
      </small>
    </div>
  </footer>
  <!-- end of footer -->

  <script src="http://antix.blue/theme/js/vendor/jquery.js"></script>
  <script src="http://antix.blue/theme/js/foundation.min.js"></script>
  <script>
    $(document).foundation();
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47845863-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>

</html>